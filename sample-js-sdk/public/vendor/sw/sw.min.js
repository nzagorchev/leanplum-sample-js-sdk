!function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{var c={exports:{}};b(),a.PushServiceWorker=c.exports}}(this,function(){"use strict";var a={};self.addEventListener("push",function(b){var c=b.data&&b.data.text()?b.data.text():null;if(!c)return void console.log("Leanplum: Push received without payload, skipping display.");var d=JSON.parse(c);if(!d||!d.title||!d.tag)return void console.log("Leanplum: No options, title or tag/id received, skipping display.");d.data&&d.data.openAction&&d.data.openAction.hasOwnProperty("__name__")&&"Open URL"===d.data.openAction.__name__&&d.data.openAction.hasOwnProperty("URL")&&(a[d.tag]=d.data.openAction.URL);var e=d.title;delete d.title,b.waitUntil(self.registration.showNotification(e,d))}),self.addEventListener("notificationclick",function(b){if(console.log("Leanplum: [Service Worker] Notification click received."),b.notification.close(),!b.notification||!b.notification.tag)return void console.log("Leanplum: No notification or tag/id received, skipping open action.");var c=b.notification.tag,d=a[c];if(!d)return void console.log("Leanplum: [Service Worker] No action defined, doing nothing.");delete a.notificationId,b.waitUntil(clients.openWindow(d))})});